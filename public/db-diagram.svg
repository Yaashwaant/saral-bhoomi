<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1400" height="900" viewBox="0 0 1400 900">
  <defs>
    <style>
      .box { fill:#f7fafc; stroke:#2d3748; stroke-width:1.5; rx:8; }
      .title { font-family:Segoe UI, Arial; font-size:16px; font-weight:bold; fill:#1a202c; }
      .text { font-family:Segoe UI, Arial; font-size:13px; fill:#2d3748; }
      .rel { stroke:#4a5568; stroke-width:1.5; marker-end:url(#arrow); }
      .relOpt { stroke:#a0aec0; stroke-dasharray:4 3; stroke-width:1.5; marker-end:url(#arrow); }
    </style>
    <marker id="arrow" viewBox="0 0 10 10" refX="10" refY="5" markerWidth="8" markerHeight="8" orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#4a5568" />
    </marker>
  </defs>

  <rect x="20" y="20" width="1360" height="60" fill="#edf2f7" stroke="#cbd5e0" rx="8"/>
  <text x="40" y="55" class="title">Saral Bhoomi - Database Diagram (MongoDB / Mongoose)</text>

  <!-- User -->
  <rect class="box" x="50" y="120" width="300" height="200"/>
  <text class="title" x="65" y="145">User</text>
  <text class="text" x="65" y="170">_id (ObjectId)</text>
  <text class="text" x="65" y="190">name, email (unique), password</text>
  <text class="text" x="65" y="210">role: admin | officer | field_officer | agent | viewer</text>
  <text class="text" x="65" y="230">department, phone, is_active</text>
  <text class="text" x="65" y="250">permissions[], profile_picture, last_login</text>
  <text class="text" x="65" y="270">timestamps, indexes: role, department</text>

  <!-- Project -->
  <rect class="box" x="400" y="120" width="350" height="240"/>
  <text class="title" x="415" y="145">Project</text>
  <text class="text" x="415" y="170">_id (ObjectId)</text>
  <text class="text" x="415" y="190">projectNumber (unique), projectName, schemeName</text>
  <text class="text" x="415" y="210">landRequired / landAvailable / landToBeAcquired</text>
  <text class="text" x="415" y="230">type, district, taluka, villages[]</text>
  <text class="text" x="415" y="250">status: overall, stage3A, stage3D, corrigendum, award</text>
  <text class="text" x="415" y="270">createdBy (ref User)</text>
  <text class="text" x="415" y="290">assignedOfficers[] (ref User), assignedAgents[] (ref User)</text>
  <text class="text" x="415" y="310">documents[], progress, isActive, timestamps</text>

  <!-- LandownerRecord -->
  <rect class="box" x="800" y="120" width="300" height="260"/>
  <text class="title" x="815" y="145">LandownerRecord</text>
  <text class="text" x="815" y="170">_id (ObjectId)</text>
  <text class="text" x="815" y="190">project_id (ref Project)</text>
  <text class="text" x="815" y="210">survey_number, landowner_name, area</text>
  <text class="text" x="815" y="230">kyc_status, payment_status, notice_generated</text>
  <text class="text" x="815" y="250">assigned_agent (string), created_by (ref User)</text>
  <text class="text" x="815" y="270">bank_* fields, contact_*, location</text>
  <text class="text" x="815" y="290">documents[], notes, remarks, timestamps</text>
  <text class="text" x="815" y="310">indexes: (project_id, serial_number unique)</text>

  <!-- JMRRecord -->
  <rect class="box" x="50" y="360" width="300" height="220"/>
  <text class="title" x="65" y="385">JMRRecord</text>
  <text class="text" x="65" y="410">_id (ObjectId)</text>
  <text class="text" x="65" y="430">project_id (ref Project)</text>
  <text class="text" x="65" y="450">officer_id (ref User)</text>
  <text class="text" x="65" y="470">survey_number, measured_area, land_type</text>
  <text class="text" x="65" y="490">status: draft | submitted | approved | rejected</text>
  <text class="text" x="65" y="510">documents[], timestamps</text>

  <!-- Notice -->
  <rect class="box" x="400" y="390" width="350" height="200"/>
  <text class="title" x="415" y="415">Notice</text>
  <text class="text" x="415" y="440">_id (ObjectId)</text>
  <text class="text" x="415" y="460">project_id (ref Project), officer_id (ref User)</text>
  <text class="text" x="415" y="480">survey_number, notice_type, notice_status</text>
  <text class="text" x="415" y="500">delivery_status, delivery_method, amount</text>
  <text class="text" x="415" y="520">documents[], timestamps</text>

  <!-- Payment -->
  <rect class="box" x="800" y="420" width="300" height="200"/>
  <text class="title" x="815" y="445">Payment</text>
  <text class="text" x="815" y="470">_id (ObjectId)</text>
  <text class="text" x="815" y="490">project_id (ref Project), officer_id (ref User)</text>
  <text class="text" x="815" y="510">survey_number, payment_type, payment_status</text>
  <text class="text" x="815" y="530">amount, bank_details, documents[], timestamps</text>

  <!-- Award -->
  <rect class="box" x="1150" y="420" width="200" height="200"/>
  <text class="title" x="1165" y="445">Award</text>
  <text class="text" x="1165" y="470">_id (ObjectId)</text>
  <text class="text" x="1165" y="490">project_id (ref Project), officer_id (ref User)</text>
  <text class="text" x="1165" y="510">survey_number, total_amount</text>
  <text class="text" x="1165" y="530">award_status, documents[], timestamps</text>

  <!-- BlockchainLedger -->
  <rect class="box" x="1050" y="120" width="300" height="260"/>
  <text class="title" x="1065" y="145">BlockchainLedger</text>
  <text class="text" x="1065" y="170">_id (ObjectId), block_id (unique)</text>
  <text class="text" x="1065" y="190">survey_number, event_type</text>
  <text class="text" x="1065" y="210">project_id (mixed), officer_id (mixed)</text>
  <text class="text" x="1065" y="230">timeline_history[], data_root, nonce</text>
  <text class="text" x="1065" y="250">previous_hash, current_hash, is_valid</text>
  <text class="text" x="1065" y="270">status: pending | mined | validated | invalid</text>

  <!-- Relationships -->
  <line class="rel" x1="575" y1="240" x2="865" y2="240" />
  <text class="text" x="650" y="230">Project 1 — * LandownerRecord</text>

  <line class="rel" x1="575" y1="240" x2="200" y2="470" />
  <text class="text" x="350" y="350">Project 1 — * JMRRecord</text>

  <line class="rel" x1="575" y1="300" x2="575" y2="430" />
  <text class="text" x="585" y="365">Project 1 — * Notice</text>

  <line class="rel" x1="700" y1="330" x2="820" y2="450" />
  <text class="text" x="720" y="410">Project 1 — * Payment</text>

  <line class="rel" x1="730" y1="320" x2="1160" y2="470" />
  <text class="text" x="980" y="360">Project 1 — * Award</text>

  <line class="rel" x1="400" y1="260" x2="200" y2="180" />
  <text class="text" x="260" y="210">User 1 — * Project (createdBy)</text>

  <line class="relOpt" x1="420" y1="300" x2="250" y2="190" />
  <text class="text" x="260" y="230">User * — * Project (assigned)</text>

  <line class="rel" x1="200" y1="450" x2="200" y2="320" />
  <text class="text" x="80" y="335">User 1 — * JMRRecord (officer_id)</text>

  <line class="rel" x1="575" y1="480" x2="200" y2="320" />
  <text class="text" x="320" y="420">User 1 — * Notice/Payment/Award (officer_id)</text>

  <line class="relOpt" x1="1150" y1="230" x2="575" y2="230" />
  <text class="text" x="980" y="220">BlockchainLedger → Project/User (optional)</text>
</svg>